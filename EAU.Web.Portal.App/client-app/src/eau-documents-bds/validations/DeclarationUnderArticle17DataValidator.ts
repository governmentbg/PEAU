import { EAUBaseValidator, ResourceHelpers, ErrMsgCodesConstants } from "eau-core";
import { DocumentFormValidationContext } from "eau-documents";
import { DeclarationUndurArticle17Data, IssuingBgPersonalDocumentReasonData } from "../models/ModelsAutoGenerated";

class ReasonDataValidator extends EAUBaseValidator<IssuingBgPersonalDocumentReasonData, DocumentFormValidationContext> {

    constructor() {
        super();

        this.ruleFor(m => m.reason).notEmpty()
            .withMessage(ResourceHelpers.formatErrorMessage(ErrMsgCodesConstants.DefaultNotEmptyErrorMessage, IssuingBgPersonalDocumentReasonData, 'reason'));

        this.ruleFor(m => m.factsAndCircumstances).notEmpty()
            .withMessage(ResourceHelpers.formatErrorMessage(ErrMsgCodesConstants.DefaultNotEmptyErrorMessage, IssuingBgPersonalDocumentReasonData, 'factsAndCircumstances'));
    }
}

export class DeclarationUnderArticle17DataValidator extends EAUBaseValidator<DeclarationUndurArticle17Data, DocumentFormValidationContext> {

    constructor() {
        super();

        this.ruleFor(m => m.reasonData).setValidator(new ReasonDataValidator());
    }
}
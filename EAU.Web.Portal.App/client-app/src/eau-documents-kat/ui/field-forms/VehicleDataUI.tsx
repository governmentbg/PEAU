import * as React from "react";
import { observer } from "mobx-react";
import { BaseProps } from "cnsys-ui-react";
import { EAUBaseComponent } from "eau-core";
import { VehicleDataVM, VehicleDataItemVM } from "../../models/ModelsAutoGenerated";
import { FieldFormUI } from "eau-documents";
import { VehicleDataItemUI } from ".";

interface VehicleDataUIProps extends BaseProps {
    extendedMode: boolean;
}

@observer export class VehicleDataUI extends EAUBaseComponent<VehicleDataUIProps, VehicleDataVM> {

    render(): JSX.Element {
        return (
            <>
                {this.model.vehicleData ?
                    <FieldFormUI title={this.getResourceByProperty(m => m.vehicleData)}>
                        <VehicleDataItemUI {...this.bind(m => m.vehicleData)} extendedView={this.props.extendedMode}  />
                    </FieldFormUI>
                    : null
                }
                {this.model.vehicleDataCollection ?
                    <FieldFormUI title={this.model.vehicleDataCollection.length == 1 ? this.getResourceByProperty(m => m.vehicleData) : this.getResourceByProperty(m => m.vehicleDataCollection)}>
                        <ul className="list-filed">
                            {
                                this.model.vehicleDataCollection.map((item: VehicleDataItemVM, index: number) => {
                                    return (
                                        <li className="list-filed__item" role="group">
                                            <VehicleDataItemUI key={index} {...this.bindArrayElement(m => m.vehicleDataCollection[index], [index])} extendedView={this.props.extendedMode} />
                                        </li>
                                    )
                                })
                            }
                        </ul>
                    </FieldFormUI>
                    : null
                }
            </>
        );
    }
}
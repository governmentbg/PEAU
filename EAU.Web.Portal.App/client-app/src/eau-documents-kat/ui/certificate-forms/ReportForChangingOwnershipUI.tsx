import { BaseProps } from "cnsys-ui-react";
import { Constants, EAUBaseComponent } from "eau-core";
import { DocumentURIUI, FieldFormUI } from "eau-documents";
import React from "react";
import { ReportForChangingOwnershipVM, Status } from "../../models/ModelsAutoGenerated";
import { ReportForChangingOwnershipNewOwnersDataUI, ReportForChangingOwnershipOldOwnersDataUI, StatusUI, VehicleRegistrationDataForDocsUI } from "../field-forms";
import { GuaranteeFundUI } from "../field-forms/GuaranteeFundUI";

export class ReportForChangingOwnershipUI extends EAUBaseComponent<BaseProps, ReportForChangingOwnershipVM> {

    render(): JSX.Element {
        return (
            <>
                <div className="row">
                    <div className="form-group col-12">
                        <p className="page-subtitle">
                            {this.getResource("GL_URI_L")} <DocumentURIUI {...this.bind(m => m.documentURI)} />
                        </p>
                        <p className="page-date">{this.getResource("GL_DATE_L")} {this.dateDisplayFor(this.model.documentReceiptOrSigningDate, Constants.DATE_FORMATS.date)}</p>
                    </div>
                </div>
                <section className="interactive-container" aria-labelledby="SECTION-TITLE-1">
                    <div className="interactive-container__content">
                        <h2 className="section-title" id="SECTION-TITLE-1">{this.getResource("DOC_KAT_ReportForChangingOwnership_vehicleRegistration_L")}</h2>
                        <FieldFormUI title={this.getResourceByProperty(m => m.vehicleRegistrationData)}>
                            <VehicleRegistrationDataForDocsUI {...this.bind(m => m.vehicleRegistrationData)} />
                        </FieldFormUI>
                        {this.model.localTaxes && this.model.localTaxes.length > 0 ?
                            <FieldFormUI title={this.getResourceByProperty(m => m.localTaxes)}>
                                <div className="alert alert-warning">
                                    <ul className="list-filed">
                                        {
                                            this.model.localTaxes.map((item: Status, index: number) => {
                                                return (
                                                    <li key={index}>
                                                        <StatusUI key={index} {...this.bind(item, '')} />
                                                    </li>
                                                )
                                            })
                                        }
                                    </ul>
                                </div>
                            </FieldFormUI>
                            : null}
                        <FieldFormUI title={this.getResourceByProperty(m => m.guaranteeFund)}>
                            <GuaranteeFundUI {...this.bind(m => m.guaranteeFund)} />
                        </FieldFormUI>
                        {this.model.periodicTechnicalCheck && this.model.periodicTechnicalCheck.length > 0 ?
                            <FieldFormUI title={this.getResourceByProperty(m => m.periodicTechnicalCheck)}>
                                <div className="alert alert-warning">
                                    <ul className="list-filed">
                                        {
                                            this.model.periodicTechnicalCheck.map((item: Status, index: number) => {
                                                return (
                                                    <li key={index}>
                                                        <StatusUI key={index} {...this.bind(item, '')} />
                                                    </li>
                                                )
                                            })
                                        }
                                    </ul>
                                </div>
                            </FieldFormUI>
                            : null
                        }
                    </div>
                </section>
                <section className="interactive-container" aria-labelledby="SECTION-TITLE-2">
                    <div className="interactive-container__content">
                        <h2 className="section-title" id="SECTION-TITLE-2">{this.getResource("DOC_KAT_ReportForChangingOwnership_oldOwners_L")}</h2>
                        <ReportForChangingOwnershipOldOwnersDataUI {...this.bind(m => m.oldOwnersData)} />
                    </div>
                </section>
                <section className="interactive-container" aria-labelledby="SECTION-TITLE-3">
                    <div className="interactive-container__content">
                        <h2 className="section-title" id="SECTION-TITLE-3">{this.getResource("DOC_KAT_ReportForChangingOwnership_newOwners_L")}</h2>
                        <ReportForChangingOwnershipNewOwnersDataUI {...this.bind(m => m.newOwnersData)} />
                    </div>
                </section>               
            </>
        )
    }
}
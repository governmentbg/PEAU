import { EAUBaseValidator, ErrMsgCodesConstants, ResourceHelpers } from "eau-core";
import { DocumentFormValidationContext } from "eau-documents";
import { LicenseInfo } from "../models/ModelsAutoGenerated";

export class LicenseValidator extends EAUBaseValidator<LicenseInfo, DocumentFormValidationContext> {

    constructor() {
        super();

        this.ruleFor(m => m.permitNumber).notEmpty()
            .withMessage(ResourceHelpers.formatErrorMessage(ErrMsgCodesConstants.DefaultNotEmptyErrorMessage, LicenseInfo, 'permitNumber'));

        this.ruleFor(m => m.permitNumber).matches("^[0-9]+$")
            .withMessage(ResourceHelpers.formatErrorMessage(ErrMsgCodesConstants.OnlyDigitsAllowed, LicenseInfo, 'permitNumber'));

        this.ruleFor(m => m.permitNumber).length(11, 11)
            .withMessage(ResourceHelpers.formatErrorMessage(ErrMsgCodesConstants.FieldMustContainsExaclyNumSymbols, LicenseInfo, 'permitNumber', 11));
    }
}
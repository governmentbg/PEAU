import { UnitInfo } from "../models/ModelsAutoGenerated";
import { AISKATNomenclatureItem } from "../models/ModelsManualAdded";
import { DeliveryUnitsInfoCache } from "./DeliveryUnitsInfoCache";
import { ImportCountriesCache } from "./ImportCountriesCache";
import { ProvinceCodesCache } from "./ProvinceCodesCache";
import { ReasonForIssuingDuplicateOfSRMPSCache } from "./ReasonForIssuingDuplicateOfSRMPSCache";
import { ServingUnitsInfoCache } from "./ServingUnitsInfoCache";
import { TerminationOfRegistrationOfVehicleCache } from "./TerminationOfRegistrationOfVehicleCache";
import { VehicleBaseColorCache } from "./VehicleBaseColorCache";
import { DeliveryRootUnitsInfoCache } from "./DeliveryRootUnitsInfoCache";

let deliveryUnitsInfoCache: DeliveryUnitsInfoCache = new DeliveryUnitsInfoCache();
let servingUnitsInfoCache: ServingUnitsInfoCache = new ServingUnitsInfoCache();
let katTerminationResonsCache: TerminationOfRegistrationOfVehicleCache = new TerminationOfRegistrationOfVehicleCache();
let katResonsForIssuingDuplicateOfSRMP: ReasonForIssuingDuplicateOfSRMPSCache = new ReasonForIssuingDuplicateOfSRMPSCache();
let katImportCountries: ImportCountriesCache = new ImportCountriesCache();
let katProvinceCodesCache: ProvinceCodesCache = new ProvinceCodesCache();
let katVehicleBaseColors: VehicleBaseColorCache = new VehicleBaseColorCache();
let deliveryRootUnitsInfoCache: DeliveryRootUnitsInfoCache = new DeliveryRootUnitsInfoCache();

export namespace Nomenclatures {

    export function getDeliveryRootUnitsInfo(serviceID: number, termType?: number, predicate?: (elem: UnitInfo) => boolean): Promise<UnitInfo[]> {
        if (termType && termType > 0) {
            return deliveryRootUnitsInfoCache.getItem(`${serviceID.toString()}_${termType}`);
        } else {
            return deliveryRootUnitsInfoCache.getItem(serviceID.toString());
        }
    }

    export function getDeliveryUnitsInfo(serviceID: number, termType?: number, predicate?: (elem: UnitInfo) => boolean): Promise<UnitInfo[]> {
        if (termType && termType > 0) {
            return deliveryUnitsInfoCache.getItem(`${serviceID.toString()}_${termType}`);
        } else {
            return deliveryUnitsInfoCache.getItem(serviceID.toString());
        }
    }

    export function getServingUnitsInfo(serviceID: number, predicate?: (elem: UnitInfo) => boolean): Promise<UnitInfo[]> {
        return servingUnitsInfoCache.getItem(serviceID.toString());
    }

    export function getTerminationOfRegistrationOfVehicle(): Promise<AISKATNomenclatureItem[]> {
        return katTerminationResonsCache.getItem();
    }

    export function getReasonForIssuingDuplicateOfSRMPS(): Promise<AISKATNomenclatureItem[]> {
        return katResonsForIssuingDuplicateOfSRMP.getItem();
    }

    export function getCountries(): Promise<AISKATNomenclatureItem[]> {
        return katImportCountries.getItem();
    }

    export function getProvinceCodes(policeDepartmentID: number, vehicleTypeCode: number): Promise<string[]> {
        return katProvinceCodesCache.getItem(`${policeDepartmentID}_${vehicleTypeCode}`);
    }

    export function getVehicleBaseColors(): Promise<AISKATNomenclatureItem[]> {
        return katVehicleBaseColors.getItem();
    }
}

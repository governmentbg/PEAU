import { EAUBaseValidator, ResourceHelpers, resourceManager, ErrMsgCodesConstants } from "eau-core";
import { PersonalInformationVM } from "../models/ModelsAutoGenerated";
import { DocumentFormValidationContext } from "./DocumentFormValidationContext";
import { PersonAddressValidator } from "./PersonAddressValidator";

export class PersonalInformationValidator extends EAUBaseValidator<PersonalInformationVM, DocumentFormValidationContext> {

    constructor(isRequiredPhone?: boolean) {
        super();

        this.ruleFor(m => m.personAddress).setValidator(new PersonAddressValidator());

        if (isRequiredPhone)
            this.ruleFor(m => m.mobilePhone).notEmpty().withMessage(ResourceHelpers.formatErrorMessage(ErrMsgCodesConstants.DefaultNotEmptyErrorMessage, new PersonalInformationVM(), 'phone'))

        this.ruleFor(m => m.mobilePhone).isValidPhone().withMessage(resourceManager.getResourceByKey("DOC_GL_WRONG_PHONE_NUMBER_E"))
    }
}
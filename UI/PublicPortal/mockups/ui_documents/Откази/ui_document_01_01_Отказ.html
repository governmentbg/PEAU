<!DOCTYPE html>
<html lang="bg">

    <head>
        <meta charset="utf-8">
        <title>Заповед за прекратяване - Портал за електронни административни услуги на МВР</title>

        <!-- Viewport Meta Tag -->
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <base href="../../">

        <!-- Custom CSS -->
        <link href="css/style.css" rel="stylesheet">
        <link href="ui_documents/draftjs.css" rel="stylesheet">

        <link rel="shortcut icon" href="images/favicon.ico" />
        <link rel="icon" type="image/ico" href="images/favicon.ico" />
    </head>

<body>

<div class="layout-wrapper">

    <div class="header-wrapper">
        <header class="header header--popup">
            <div class="header-bg">
                <div class="section-wrapper fixed-content-width header-gerb-bg">
                    <div class="form-row header-container ">
                        <div class="col-auto">
                            <img class="mvr-logo" src="images/logo.png" alt="">
                        </div>
                        <div class="col header-title">
                            <p>
                                Министерство на вътрешните работи
                            </p>
                            <p class="site-name">Портал за електронни административни услуги</p>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>

    <main class="content-wrapper">

        <div class="page-header-wrapper section-wrapper section-wrapper--margin-top fixed-content-width">
        </div>

        <div class="main-wrapper section-wrapper section-wrapper--margins fixed-content-width">
            <div class="page-header" id="PAGE-CONTENT">
                <div class="row">
                    <div class="col">
                        <h1 class="page-title">Заповед за прекратяване</h1>
                    </div>
                </div>
            </div>

            <div class="page-wrapper" id="ARTICLE-CONTENT">
      
                <div class="ui-form ui-form--input">

                    <!-- <div class="row">
                        <div class="form-group col-12">
                            <h2 class="page-subtitle">УРИ 9897-18-26.04.2017</h2>
                            <p class="page-date">Дата 26.04.2017 г.</p>
                        </div>
                    </div> -->
                    
                    <fieldset class="fields-group">
                        <legend>
                            <h3 class="field-title">Доставчик на електронни административни услуги</h3>
                        </legend>

                        <div class="row">
                            <div class="form-group col-12">
                                <h4 class="form-control-label">Вид на доставчик</h4>
                                <p class="field-text">Административен орган</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-12">
                                <h4 class="form-control-label">
                                    Наименование на юридическо лице
                                </h4>
                                <p class="field-text">Министерство на вътрешните работи</p>
                            </div>
                            <div class="form-group col-sm-6">
                                <h4 class="form-control-label">
                                    ЕИК/БУЛСТАТ
                                </h4>
                                <p class="field-text">000695235</p>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="fields-group">
                        <legend>
                            <h3 class="field-title">Данни за преписка</h3>
                        </legend>

                        <div class="row">
                            <div class="form-group col-12">
                                <h4 class="form-control-label">УРИ на преписка</h4>
                                <p class="field-text">9897-17-26.04.2017</p>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="fields-group">
                        <legend>
                            <h3 class="field-title">Съдържание</h3>
                        </legend>

                        <div class="row">
                            <div class="form-group col-12">
                                <div class="plain-text form-control-box" id="OTKAZ">
                                    <div id="EDITOR-CONTENT" class="document-template">
                               
                                    </div>
                                </div>
                                <!-- <br>
                                <button type="button" onclick="alert(document.getElementById('OTKAZ').innerHTML);">Покажи HTML</button> -->
                            </div>
                        </div>

                    </fieldset>


                    <div class="button-bar button-bar--form button-bar--responsive">
                        <div class="right-side">
                            <button type="button" class="btn btn-primary" onclick="window.location.assign('ui_documents/Откази/ui_document_01_02_Отказ_Преглед.html')" >Продължи</button>
                            <!-- <button type="button" class="btn btn-secondary" onclick="window.location.assign('')">Прегледай</button> -->
                        </div>
                        <div class="left-side">
                            <button type="button" class="btn btn-secondary">Откажи</button>
                        </div>
                    </div>

                </div>
            
            </div>

        </div>

    </main>

</div>



<div id="TEMPLATE-HTML" style="display: none;">
    <p style="text-align:center;"><span style="font-size: 1.125em;"><strong>МИНИСТЕРСТВО НА ВЪТРЕШНИТЕ РАБОТИ</strong></span></p>
    <p style="text-align:center;" ><strong><span style="font-size: 1em;" data-editable="">&lt;Структура на МВР&gt;</span></strong></p>
    <hr>
    <p style="text-align:center;"><span data-editable="">адрес на структурата на МВР</span></p>
    <br>
    <h2 style="text-align:center;">ЗАПОВЕД</h2>
    <p style="text-align:center;">№ &lt;УРИ на документ&gt;</p>
    <p>ОТНОСНО: Прекратяване на административно производство.</p>
    <div style="text-align:justify;" data-editable="" data-htmlenable="" data-multiline=""></div>
    <p style="text-align:center;"><span style="font-size: 1.125em;"><strong>ЗАПОВЯДВАМ:</strong></span></p>
    <p style="text-align:justify;">Прекратяване на административно производство по &lt;наименование на услугата от заявлението&gt; на &lt;НАИМЕНОВАНИЕ ПРАВНА_ФОРМА на ЮЛ или ИМЕНА на ФЛ - получател на услугата&gt;, &lt;ЕИК/БУЛСТАТ/ЕГН/ЛНЧ&gt;: &lt;идентификатор на ЮЛ/ФЛ&gt;, с адрес: &lt;седалище по регистрация за ЮЛ или постоянен адрес за ФЛ&gt;, по чл. <span data-editable=""></span>, ал. <span data-editable=""></span>, т. <span data-editable=""></span> от Закона за оръжията, боеприпасите, взривните вещества и пиротехническите изделия.</p>
    <p style="text-align:justify;">Заповедта може да бъде обжалвана по реда на АПК в 14-дневен срок от съобщаването й чрез <span data-editable="">директора/началника</span> на <span data-editable="">&lt;структура на МВР&gt;</span> пред по-горестоящия административен орган или по съдебен ред пред Административен съд - <span data-editable=""> </span></p>

    <table style="width: 100%;">
        <tr>
            <td style="width: 50%;">
            </td>
            <td style="width: 50%;">
                <p><span data-editable="">ДИРЕКТОР/НАЧАЛНИК:</span></p>
                <p><span data-editable="" data-multiline="">Главен комисар</span></p>
            </td>
        </tr>
    </table>

</div>


<!-- jQuery library -->
<script src="js/jquery-3.2.1.min.js"></script>


<!-- Latest compiled and minified Bootstrap JavaScript -->
<script src="js/bootstrap.bundle.min.js"></script>



<!-- Page Scripst -->
<script>

    $(document).ready(function () {

        // Show Page SubNavigation
        $('#SHOW-MENU').on('click', function () {
            if ( $(this).attr('aria-expanded') == 'false' ) {
                $(this).attr('aria-expanded','true');
            } else if ( $(this).attr('aria-expanded') == 'true' ) {
                $(this).attr('aria-expanded','false');
            }

            $(this).toggleClass('collapsed');

            $("#PAGE-NAV").slideToggle(
                function() {
                $(this).css('display','');
                $(this).toggleClass('show');
                
            });
        });

        
        initEditor();
    });


    // Editor

    function initEditor(){

        let template = $("#TEMPLATE-HTML").html();
        
        template = template.replace(/data-editable=""/gi,'contenteditable="true" class="editable" data-editable=""');

        $("#EDITOR-CONTENT").html(template);

        

        // Content Editable

        $("[data-editable]").on("paste", function (event) {
            
            if ( !event.currentTarget.attributes['data-htmlenable'] ) {


                if(event.originalEvent.clipboardData && event.originalEvent.clipboardData.getData) {                          
                    // event.preventDefault();
                    // document.execCommand("insertText", false, event.originalEvent.clipboardData.getData('text'));

                    let range = window.getSelection().getRangeAt(0);
                    let clipboardText = document.createTextNode( event.originalEvent.clipboardData.getData('text') );    
                    range.deleteContents();
                    range.insertNode(clipboardText);
                    range.setStartAfter(clipboardText);
                    range.setEndAfter(clipboardText);
                    return false;
                } 
                else {
                    if (window.clipboardData && window.clipboardData.getData) { // IE
                        // event.preventDefault();
                        // document.execCommand("insertText", false, window.clipboardData.getData('Text'));

                        let range = window.getSelection().getRangeAt(0);
                        let clipboardText = document.createTextNode( window.clipboardData.getData('Text') );
                        range.deleteContents();
                        range.insertNode(clipboardText);
                        range.setStartAfter(clipboardText);
                        range.setEndAfter(clipboardText);
                        return false;
                    }
                }

            }   

        });


        $("[data-editable]").on("keydown", function (event) {
            
                if (event.keyCode == 13) {
                    
                    if (event.currentTarget.attributes['data-multiline']) {
                        // event.preventDefault();

                        // insert 2 br tags (if only one br tag is inserted the cursor won't go to the next line)
                        // document.execCommand('insertHTML', false, '<br> ');
                        // prevent the default behaviour of return key pressed
                        // return false;

                        // let content = event.currentTarget.innerHTML;
                        // event.currentTarget.innerHTML = content.replace(/[\u200B](?=.*[.])/g, '');
                        let selection = window.getSelection();
                        let range = selection.getRangeAt(0);
                        let newElement = document.createElement('br');

                        // -- проверка дали има текст след курсора
                            let editebleRange = range.cloneRange();
                            editebleRange.selectNodeContents(event.currentTarget);
                            editebleRange.setStart(range.endContainer, range.endOffset);
                            let carretAtEnd = editebleRange.toString().length == 0;
                        //--

                        range.deleteContents();
                        range.insertNode(newElement);
                        range.setStartAfter(newElement);
                        range.setEndAfter(newElement);
                        
                        if (carretAtEnd ) {
                            let newText = document.createTextNode('\u200B');
                            range.insertNode(newText);
                            range.setStartBefore(newText);
                            range.setEndBefore(newText);
                        }
                        
                    }
                    event.preventDefault();
                }



            });

    }


</script>
    

</body>
</html>
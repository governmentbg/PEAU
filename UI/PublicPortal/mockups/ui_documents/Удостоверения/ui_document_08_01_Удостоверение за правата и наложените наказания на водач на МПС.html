<!DOCTYPE html>
<html lang="bg">

    <head>
        <meta charset="utf-8">
        <title>Удостоверение за правата и наложените наказания на водач на МПС - Портал за електронни административни услуги на МВР</title>

        <!-- Viewport Meta Tag -->
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <base href="../../">

        <!-- Custom CSS -->
        <link href="css/style.css" rel="stylesheet">
        <link href="ui_documents/draftjs.css" rel="stylesheet">

        <link rel="shortcut icon" href="images/favicon.ico" />
        <link rel="icon" type="image/ico" href="images/favicon.ico" />
    </head>

<body>

<div class="layout-wrapper">

    <div class="header-wrapper">
        <header class="header header--popup">
            <div class="header-bg">
                <div class="section-wrapper fixed-content-width header-gerb-bg">
                    <div class="form-row header-container ">
                        <div class="col-auto">
                            <img class="mvr-logo" src="images/logo.png" alt="">
                        </div>
                        <div class="col header-title">
                            <p>
                                Министерство на вътрешните работи
                            </p>
                            <p class="site-name">Портал за електронни административни услуги</p>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>

    <main class="content-wrapper">

        <div class="page-header-wrapper section-wrapper section-wrapper--margin-top fixed-content-width">
        </div>

        <div class="main-wrapper section-wrapper section-wrapper--margins fixed-content-width">
            <div class="page-header" id="PAGE-CONTENT">
                <div class="row">
                    <div class="col">
                        <h1 class="page-title">Удостоверение за правата и наложените наказания на водач на МПС</h1>
                    </div>
                </div>
            </div>

            <div class="page-wrapper" id="ARTICLE-CONTENT">
      
                <div class="ui-form ui-form--input">
                    
                    <fieldset class="fields-group">
                        <legend>
                            <h3 class="field-title">Доставчик на електронни административни услуги</h3>
                        </legend>

                        <div class="row">
                            <div class="form-group col-12">
                                <h4 class="form-control-label">Вид на доставчик</h4>
                                <p class="field-text">Административен орган</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-12">
                                <h4 class="form-control-label">
                                    Наименование на юридическо лице
                                </h4>
                                <p class="field-text">Министерство на вътрешните работи</p>
                            </div>
                            <div class="form-group col-sm-6">
                                <h4 class="form-control-label">
                                    ЕИК/БУЛСТАТ
                                </h4>
                                <p class="field-text">000695235</p>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="fields-group">
                        <legend>
                            <h3 class="field-title">Данни за преписка</h3>
                        </legend>

                        <div class="row">
                            <div class="form-group col-12">
                                <h4 class="form-control-label">УРИ на преписка</h4>
                                <p class="field-text">9897-17-26.04.2017</p>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="fields-group">
                        <legend>
                            <h3 class="field-title">Съдържание</h3>
                        </legend>

                        <div class="row">
                            <div class="form-group col-12">
                                <div class="plain-text form-control-box" id="OTKAZ">
                                    <div id="EDITOR-CONTENT" class="document-template">
                               
                                    </div>
                                </div>

                                <!-- <br>
                                <button type="button" onclick="alert(document.getElementById('OTKAZ').innerHTML);">Покажи HTML</button> -->
                            </div>
                        </div>

                    </fieldset>

                    <fieldset class="fields-group">
                        <legend><h3 class="field-title">Данните в удостоверението са актуални към </h3></legend>
                        <div class="row">
                            <div class="form-group col-sm-auto">
                                <label class="form-control-label" for="dat">Дата</label>
                                <div class="input-group date-control">
                                    <input class="form-control" type="text" id="dat" value="01.12.2019">
                                    <div class="input-group-append">
                                        <button class="btn btn-light" type="button" tabindex="-1">
                                            <i class="ui-icon ui-icon-calendar"></i>
                                        </button>
                                    </div>
                                </div>                                        
                            </div>
                            <div class="form-group col-sm-auto">
                                <label class="form-control-label" for="time">Час</label>
                                <div class="input-group date-control">
                                    <input class="form-control" type="text" id="time" value="12:45">
                                    <div class="input-group-append">
                                        <button class="btn btn-light" type="button" tabindex="-1">
                                            <i class="ui-icon ui-icon-clock"></i>
                                        </button>
                                    </div>
                                </div>                                        
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="fields-group">
                        <legend><h3 class="field-title">Удостоверението да послужи</h3></legend>
                        <div class="row">
                            <div class="col-12 form-group">
                                <p class="field-text">за лична информация</p>
                            </div>
                        </div>
                    </fieldset>

                    <div class="button-bar button-bar--form button-bar--responsive">
                        <div class="right-side">
                            <button type="button" class="btn btn-primary" onclick="window.location.assign('ui_documents/Удостоверения/ui_document_08_02_Удостоверение за правата и наложените наказания на водач на МПС_Преглед.html')" >Продължи</button>
                        </div>
                        <div class="left-side">
                            <button type="button" class="btn btn-secondary">Откажи</button>
                        </div>
                    </div>

                </div>
            
            </div>

        </div>

    </main>

</div>



<div id="TEMPLATE-HTML" style="display: none;">
    <p style="text-align:center;"><span style="font-size: 1.125em;"><strong>МИНИСТЕРСТВО НА ВЪТРЕШНИТЕ РАБОТИ</strong></span></p>
    <p style="text-align:center;" ><span style="font-size: 1em;" data-editable=""><strong>{MVR_STRUCTURE}</strong></span></p>
    <hr>
    <h2 style="text-align:center;">УДОСТОВЕРЕНИЕ № {DOCUMENT_URI}</h2>
    <p style="text-align:center;"><span style="font-size: 1.125em;"><strong>По преписка с № {CASE_URI}</strong></span></p>
    
    <p style="text-align:justify;">На основание <span data-editable="">чл. 31 от Наредба № I-157 на МВР от 2002 г.</span> - <span data-editable="">{MVR_STRUCTURE}</span> издава настоящето на {RESIPIENT_NAME}, {RESIPIENT_IDENT_TYPE}: {RESIPIENT_IDENTIFIER}</p>

    <div style="text-align:justify;margin-bottom:.75em;" data-editable="" data-htmlenable=""></div>
</div>


<!-- jQuery library -->
<script src="js/jquery-3.2.1.min.js"></script>


<!-- Latest compiled and minified Bootstrap JavaScript -->
<script src="js/bootstrap.bundle.min.js"></script>



<!-- Page Scripst -->
<script>

    $(document).ready(function () {

        // Show Page SubNavigation
        $('#SHOW-MENU').on('click', function () {
            if ( $(this).attr('aria-expanded') == 'false' ) {
                $(this).attr('aria-expanded','true');
            } else if ( $(this).attr('aria-expanded') == 'true' ) {
                $(this).attr('aria-expanded','false');
            }

            $(this).toggleClass('collapsed');

            $("#PAGE-NAV").slideToggle(
                function() {
                $(this).css('display','');
                $(this).toggleClass('show');
                
            });
        });

        
        initEditor();
    });


    // Editor

    function initEditor(){

        let template = $("#TEMPLATE-HTML").html();
        
        template = template.replace(/data-editable=""/gi,'contenteditable="true" class="editable" data-editable=""');

        $("#EDITOR-CONTENT").html(template);



        // Content Editable

        // $(".editable").on("paste", function (event) {            
            
        //     if(event.originalEvent.clipboardData && event.originalEvent.clipboardData.getData) {                          
        //         // event.preventDefault();
        //         // document.execCommand("insertText", false, event.originalEvent.clipboardData.getData('text'));

        //         let range = window.getSelection().getRangeAt(0);
        //         let clipboardText = document.createTextNode( event.originalEvent.clipboardData.getData('text') );    
        //         range.deleteContents();
        //         range.insertNode(clipboardText);
        //         range.setStartAfter(clipboardText);
        //         range.setEndAfter(clipboardText);
        //         return false;
        //     } 
        //     else {
        //         if (window.clipboardData && window.clipboardData.getData) { // IE
        //             // event.preventDefault();
        //             // document.execCommand("insertText", false, window.clipboardData.getData('Text'));

        //             let range = window.getSelection().getRangeAt(0);
        //             let clipboardText = document.createTextNode( window.clipboardData.getData('Text') );
        //             range.deleteContents();
        //             range.insertNode(clipboardText);
        //             range.setStartAfter(clipboardText);
        //             range.setEndAfter(clipboardText);
        //             return false;
        //         }
        //     }

        // });


        $(".editable").on("keydown", function (event) {            

                if (event.keyCode === 13) {
                    // event.preventDefault();

                    // insert 2 br tags (if only one br tag is inserted the cursor won't go to the next line)
                    // document.execCommand('insertHTML', false, '<br> ');
                    // prevent the default behaviour of return key pressed
                    // return false;

                    // let content = event.currentTarget.innerHTML;
                    // event.currentTarget.innerHTML = content.replace(/[\u200B](?=.*[.])/g, '');

                    let range = window.getSelection().getRangeAt(0);
                    let newElement = document.createElement('br');
                    let newText = document.createTextNode('\u200B');              

                    range.deleteContents();
                    range.insertNode(newElement);
                    range.setStartAfter(newElement);
                    range.setEndAfter(newElement);

                    range.insertNode(newText);
                    range.setStartBefore(newText);
                    range.setEndAfter(newText);

                    return false;
                }

            });

    }


</script>
    

</body>
</html>
import { AsyncUIProps, BaseProps, withAsyncFrame } from "cnsys-ui-react";
import { EAUBaseComponent } from "eau-core";
import { action } from "mobx";
import { observer } from "mobx-react";
import React from 'react';
import { LabelSearchCriteria } from "../../../models/ModelsAutoGenerated";
import CardFooterUI from '../../common/CardFooterUI';

interface LabelsSearchFormProps extends BaseProps, AsyncUIProps {
    searchLabelsFunc
}

@observer class LabelsSearchFormUIImpl extends EAUBaseComponent<LabelsSearchFormProps, LabelSearchCriteria> {

    constructor(props: LabelsSearchFormProps) {
        super(props);

        this.search = this.search.bind(this);
        this.clear = this.clear.bind(this);
    }

    render() {
        return <>
            <div className="card-header">
                <h3>{this.getResource("GL_ADMIN_LABEL_SEARCH_TITLE_L")}</h3>
            </div>
            <div className="card-body">
                <div className="row">
                    <div className="form-group col-sm-12 col-md-6 col-lg-6 col-xl-4">
                        {this.labelFor(m => m.code, "GL_CODE_L")}
                        {this.textBoxFor(m => m.code)}
                    </div>
                    <div className="form-group col-sm-12 col-md-6 col-lg-6 col-xl-4">
                        {this.labelFor(m => m.value, "GL_TEXT_L")}
                        {this.textBoxFor(m => m.value)}
                    </div>
                </div>
            </div>
            <CardFooterUI onClear={this.clear} onSearch={this.search} />
        </>
    }

    private search() {
        this.props.searchLabelsFunc(this.model);
    }

    @action private clear() {
        this.model.code = "";
        this.model.value = "";

        this.search();
    }
}

export const LabelsSearchFormUI = withAsyncFrame(LabelsSearchFormUIImpl, false);